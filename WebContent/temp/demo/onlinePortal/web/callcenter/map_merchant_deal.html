<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<title>== Ezlink ==</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">

<link href="../../css/body.css" rel="stylesheet" type="text/css">

   <link type="text/css" href="../../css/jquery-ui-1.8.15.custom.css" rel="stylesheet" />
   <link type="text/css" href="../../css/ui.jqgrid.css" rel="stylesheet" />


 

  <script src="../../js/jquery-1.4.2.min.js"></script>
  <script src="../../js/jquery-ui-1.8.4.custom.min.js"></script>
 
  <script src="../../js/i18n/grid.locale-en.js"></script>
  <script src="../../js/jquery.jqGrid.min.js"></script>
  
<script language="Javascript">
function search(){
	var griddata = [
{MERCHANT_ID:'10',MERCHANT_TYPE:'POS',MERCHANT_LOCATION:'Suntec City' }, 
{MERCHANT_ID:'11',MERCHANT_TYPE:'POS',MERCHANT_LOCATION:'Raffles City' }, 
{MERCHANT_ID:'12',MERCHANT_TYPE:'POS',MERCHANT_LOCATION:'Plaza Singapura' } 
];
	  jQuery("#list2").jqGrid( {
	      	//url: 'jsrpc.action?screenName=TestPage&submitdata={bulkcmd="prodgrid"}&q=2&_search=false&nd=1314263082628&rows=10&page=2&sidx=id&sord=desc',
	      	//url: '<%= request.getContextPath() %>/jqgrid.action?command=true&screenName=merchant_view&submitdata={bulkcmd="search_mer"}',
	      	//url: 'http://localhost/jqgrid/server.php?q=2',
	   	    datatype: "local",
	   	    data: griddata,
	   	   // data: mydata,
	      	colNames: [ 'Merchant ID',  'Merchant Type','Location'],
	      	colModel: [
	      		{name:'MERCHANT_ID',index:'MERCHANT_ID', width:200 },
	      		{name:'MERCHANT_TYPE',index:'MERCHANT_TYPE', width:200 },
	      		{name:'MERCHANT_LOCATION',index:'MERCHANT_LOCATION', width:150},
	      	],
	      	rowNum: 10,
	      	rowList: [ 10, 20, 30],
	      	pager: '#pager2',
	      	sortname: 'MERCHANT_ID',
	        viewrecords: true,
	        sortorder: "desc",
	        
	    	ondblClickRow: function(id){ alert("You double click row with id: "+id);},
	      // caption: "Merchant List"
	   } );
	jQuery("#list2").jqGrid('setGridWidth',500);
	    jQuery("#list2").jqGrid('navGrid','#pager2',{del: false,add: false,edit:false},{},{},{},{multipleSearch:true});
		
		
		
		jQuery("#list2").jqGrid('navGrid','#pager2',{edit:false,add:false,del:false,refresh:false,searchtext:"Find"});
		 
		 
}

function selectMerchant(){
	var id= jQuery('#list2').jqGrid('getGridParam','selrow'); 
	if (id)	{
		var ret = jQuery("#list2").jqGrid('getRowData',id);
		$('#selmerchant').val(ret.MERCHANT_ID);
		
	} else { alert("Please select row");}
}
function selectDeal(){
	var id= jQuery('#listdeal').jqGrid('getGridParam','selrow'); 
	if (id)	{
		var ret = jQuery("#listdeal").jqGrid('getRowData',id);
		$('#seldeal').val(ret.Deal_ID);
		
	} else { alert("Please select row");}
}

function onNext(){
	window.location = "updateProfile2.html";
}
   
function bannerClick (args) {
	window.open("bannerpopup.html","bannerpopup.html","width=400,height=600");
}   
function popPromo(args) {
	window.open("promo"+args+"big.html","","width=400,height=600")
}

function createTableGrid(){
	search();
	tableToGrid('#listdeal', {pager: '#pagerdeal'});
	jQuery("#listdeal").jqGrid('navGrid','#pagerdeal',{del: false,add: false,edit:false});
	jQuery("#listdeal").jqGrid('setGridWidth',500);
	jQuery("#listdeal").jqGrid('navGrid','#pager2',{del: false,add: false,edit:false});
}


</script>

</head>
<body onload="createTableGrid()">
<form>
  <table width="500px" height="20" border="0" cellpadding="0"  cellspacing="0" class="head1">
    <tr>
      <td>Map Merchant Deal</td>
    </tr>
  </table>
 <br/>


  <table class="table1">
<tr><td>Merchant ID:</td><td>
<input type="text" name="mearchantid_search" id="mearchantid_search" /></td><td><button onclick="search()">Search</button>
</td><td><button type="button" onclick="selectMerchant()">Select Merchant</button></td>
</tr>
</table>
<p/>
<p> <!-- merchant search table -->
 <table id="list2" style="width:500px"></table>
 <div id="pager2"></div>
 
</p>   


 <!--deal search table-->
  <table   border="0" cellpadding="0" cellspacing="0" class="table">
  	<tr>
  		<td>Search: &nbsp;
		</td>
		<td><select><option>Deal ID</option><option>Promotion ID</option></select></td>
		<td>&nbsp;<input ><button>Go</button></td>
		<td><button type="button"onclick="selectDeal()">Select Deal</button></td>
  	</tr>
  </table>
  <br/>
  <table id="listdeal" width="400px" border="0" cellpadding="0" cellspacing="0" class="table">
  	
 	<tr>
 		<tr >
 			<th>Deal ID</th><th>Merchant ID</th><th>Deal Short Desc</th>
		</tr>
		<tr>
 			<td>101</td><td> </td><td>Cool Cup Deal</td>
 	   </tr>
	   <tr>
 			<td>199</td><td> </td><td>Cool Coke deal</td>
 	   </tr>
  </table>
  <div id='pagerdeal'></div>
  <br/><br/>
 <table class="table">
 <tr><td>
 Selected Merchant:</td><td> <input type="text" name="selmerchant" id="selmerchant"  /></td><tr>
 <tr><td>Selected Deal:</td><td>  <input type="text" name="seldeal" id="seldeal" /></td><tr>
 <tr><td colspan="2"><button type="button" onclick="saveMerchantDealMap()" >Save Mapping</button></td><tr>
 </table>
</form>
</body>
</html>
